{"version":3,"file":"chunk-D500K7SW.js","sources":["../../src/services/notificationService.ts","../../src/components/NotificationBell.tsx"],"sourcesContent":["// Notification service untuk sistem informasi akademik\n// Mendukung in-app notifications dan browser push notifications\n\nexport interface NotificationItem {\n  id: string;\n  title: string;\n  message: string;\n  type: 'academic' | 'schedule' | 'grade' | 'announcement' | 'reminder' | 'system';\n  priority: 'low' | 'medium' | 'high' | 'urgent';\n  timestamp: string;\n  isRead: boolean;\n  actionUrl?: string;\n  data?: any;\n}\n\nexport interface NotificationPreferences {\n  enableBrowserNotifications: boolean;\n  enableAcademicNotifications: boolean;\n  enableScheduleReminders: boolean;\n  enableGradeNotifications: boolean;\n  enableAnnouncementNotifications: boolean;\n  reminderTimeBeforeClass: number; // minutes\n  quietHours: {\n    enabled: boolean;\n    start: string; // HH:MM format\n    end: string; // HH:MM format\n  };\n}\n\nclass NotificationService {\n  private static NOTIFICATIONS_KEY = 'malnu_notifications';\n  private static PREFERENCES_KEY = 'malnu_notification_preferences';\n\n  // Default preferences\n  private static defaultPreferences: NotificationPreferences = {\n    enableBrowserNotifications: true,\n    enableAcademicNotifications: true,\n    enableScheduleReminders: true,\n    enableGradeNotifications: true,\n    enableAnnouncementNotifications: true,\n    reminderTimeBeforeClass: 15,\n    quietHours: {\n      enabled: false,\n      start: '22:00',\n      end: '07:00'\n    }\n  };\n\n  // Get all notifications\n  static getNotifications(): NotificationItem[] {\n    const notifications = localStorage.getItem(this.NOTIFICATIONS_KEY);\n    return notifications ? JSON.parse(notifications) : [];\n  }\n\n  // Save notifications\n  private static saveNotifications(notifications: NotificationItem[]): void {\n    localStorage.setItem(this.NOTIFICATIONS_KEY, JSON.stringify(notifications));\n  }\n\n  // Add new notification\n  static addNotification(notification: Omit<NotificationItem, 'id' | 'timestamp' | 'isRead'>): NotificationItem {\n    const notifications = this.getNotifications();\n    const newNotification: NotificationItem = {\n      ...notification,\n      id: `notif_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      timestamp: new Date().toISOString(),\n      isRead: false\n    };\n\n    notifications.unshift(newNotification);\n    this.saveNotifications(notifications);\n\n    // Show in-app notification if enabled\n    if (this.shouldShowNotification(newNotification)) {\n      this.showInAppNotification(newNotification);\n    }\n\n    // Show browser notification if enabled and permitted\n    if (this.getPreferences().enableBrowserNotifications && this.isBrowserNotificationSupported()) {\n      this.requestBrowserNotificationPermission().then(granted => {\n        if (granted) {\n          this.showBrowserNotification(newNotification);\n        }\n      });\n    }\n\n    return newNotification;\n  }\n\n  // Mark notification as read\n  static markAsRead(notificationId: string): void {\n    const notifications = this.getNotifications();\n    const index = notifications.findIndex(n => n.id === notificationId);\n    if (index !== -1) {\n      notifications[index].isRead = true;\n      this.saveNotifications(notifications);\n    }\n  }\n\n  // Mark all notifications as read\n  static markAllAsRead(): void {\n    const notifications = this.getNotifications();\n    notifications.forEach(n => n.isRead = true);\n    this.saveNotifications(notifications);\n  }\n\n  // Delete notification\n  static deleteNotification(notificationId: string): void {\n    const notifications = this.getNotifications();\n    const filtered = notifications.filter(n => n.id !== notificationId);\n    this.saveNotifications(filtered);\n  }\n\n  // Clear all notifications\n  static clearAllNotifications(): void {\n    this.saveNotifications([]);\n  }\n\n  // Get unread count\n  static getUnreadCount(): number {\n    return this.getNotifications().filter(n => !n.isRead).length;\n  }\n\n  // Get preferences\n  static getPreferences(): NotificationPreferences {\n    const prefs = localStorage.getItem(this.PREFERENCES_KEY);\n    return prefs ? { ...this.defaultPreferences, ...JSON.parse(prefs) } : this.defaultPreferences;\n  }\n\n  // Save preferences\n  static savePreferences(preferences: Partial<NotificationPreferences>): void {\n    const currentPrefs = this.getPreferences();\n    const newPrefs = { ...currentPrefs, ...preferences };\n    localStorage.setItem(this.PREFERENCES_KEY, JSON.stringify(newPrefs));\n  }\n\n  // Check if should show notification based on preferences and quiet hours\n  private static shouldShowNotification(notification: NotificationItem): boolean {\n    const prefs = this.getPreferences();\n\n    // Check notification type preferences\n    switch (notification.type) {\n      case 'academic':\n        if (!prefs.enableAcademicNotifications) return false;\n        break;\n      case 'schedule':\n        if (!prefs.enableScheduleReminders) return false;\n        break;\n      case 'grade':\n        if (!prefs.enableGradeNotifications) return false;\n        break;\n      case 'announcement':\n        if (!prefs.enableAnnouncementNotifications) return false;\n        break;\n    }\n\n    // Check quiet hours\n    if (prefs.quietHours.enabled) {\n      const now = new Date();\n      const currentTime = now.getHours() * 100 + now.getMinutes();\n      const startTime = parseInt(prefs.quietHours.start.replace(':', ''));\n      const endTime = parseInt(prefs.quietHours.end.replace(':', ''));\n\n      if (startTime > endTime) {\n        // Quiet hours span midnight (e.g., 22:00 to 07:00)\n        if (currentTime >= startTime || currentTime <= endTime) {\n          return false;\n        }\n      } else {\n        // Quiet hours within same day\n        if (currentTime >= startTime && currentTime <= endTime) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  }\n\n  // Show in-app notification (toast)\n  private static showInAppNotification(notification: NotificationItem): void {\n    // Dispatch custom event for components to listen to\n    const event = new CustomEvent('showNotification', {\n      detail: notification\n    });\n    window.dispatchEvent(event);\n  }\n\n  // Browser notification support check\n  private static isBrowserNotificationSupported(): boolean {\n    return 'Notification' in window;\n  }\n\n  // Request browser notification permission\n  private static async requestBrowserNotificationPermission(): Promise<boolean> {\n    if (!this.isBrowserNotificationSupported()) return false;\n\n    if (Notification.permission === 'granted') return true;\n    if (Notification.permission === 'denied') return false;\n\n    const permission = await Notification.requestPermission();\n    return permission === 'granted';\n  }\n\n  // Show browser notification\n  private static showBrowserNotification(notification: NotificationItem): void {\n    if (!this.isBrowserNotificationSupported() || Notification.permission !== 'granted') {\n      return;\n    }\n\n    const options: NotificationOptions = {\n      body: notification.message,\n      icon: '/favicon.ico',\n      badge: '/favicon.ico',\n      tag: notification.id,\n      requireInteraction: notification.priority === 'urgent',\n      silent: notification.priority === 'low'\n    };\n\n    const browserNotification = new Notification(notification.title, options);\n\n    // Auto-close after 5 seconds for non-urgent notifications\n    if (notification.priority !== 'urgent') {\n      setTimeout(() => {\n        browserNotification.close();\n      }, 5000);\n    }\n\n    // Handle click\n    browserNotification.onclick = () => {\n      window.focus();\n      if (notification.actionUrl) {\n        window.location.href = notification.actionUrl;\n      }\n      browserNotification.close();\n    };\n  }\n\n  // Schedule class reminder\n  static scheduleClassReminder(scheduleItem: any, minutesBefore: number = 15): void {\n    const classTime = this.parseTimeString(scheduleItem.time.split(' - ')[0]);\n    const reminderTime = new Date(classTime.getTime() - (minutesBefore * 60 * 1000));\n\n    const now = new Date();\n    const delay = reminderTime.getTime() - now.getTime();\n\n    if (delay > 0) {\n      setTimeout(() => {\n        this.addNotification({\n          title: 'Pengingat Jadwal',\n          message: `Kelas ${scheduleItem.subject} akan dimulai dalam ${minutesBefore} menit`,\n          type: 'schedule',\n          priority: 'medium',\n          actionUrl: '/portal?tab=schedule'\n        });\n      }, delay);\n    }\n  }\n\n  // Parse time string to Date object\n  private static parseTimeString(timeString: string): Date {\n    const [hours, minutes] = timeString.split(':').map(Number);\n    const date = new Date();\n    date.setHours(hours, minutes, 0, 0);\n    return date;\n  }\n\n  // Initialize notification system\n  static initialize(): void {\n    // Request notification permission on load\n    if (this.isBrowserNotificationSupported() && Notification.permission === 'default') {\n      this.requestBrowserNotificationPermission();\n    }\n\n    // Schedule class reminders for today\n    this.scheduleTodaysReminders();\n\n    // Set up periodic check for new notifications\n    setInterval(() => {\n      this.checkForScheduledNotifications();\n    }, 60000); // Check every minute\n  }\n\n  // Schedule reminders for today's classes\n  private static scheduleTodaysReminders(): void {\n    const prefs = this.getPreferences();\n    if (!prefs.enableScheduleReminders) return;\n\n    // This would typically come from the schedule data\n    // For now, we'll add some sample reminders\n    const todaySchedule = [\n      { time: '07:00', subject: 'Matematika' },\n      { time: '08:45', subject: 'Fisika' },\n      { time: '10:30', subject: 'Bahasa Indonesia' }\n    ];\n\n    todaySchedule.forEach(schedule => {\n      this.scheduleClassReminder(schedule, prefs.reminderTimeBeforeClass);\n    });\n  }\n\n  // Check for scheduled notifications\n  private static checkForScheduledNotifications(): void {\n    // This would check for scheduled notifications from the server\n    // For now, we'll simulate some academic notifications\n    const lastCheck = localStorage.getItem('malnu_last_notification_check');\n    const now = Date.now();\n\n    // Check every 5 minutes for demo purposes\n    if (!lastCheck || now - parseInt(lastCheck) > 300000) {\n      localStorage.setItem('malnu_last_notification_check', now.toString());\n\n      // Simulate random academic notifications\n      if (Math.random() < 0.3) { // 30% chance\n        this.addNotification({\n          title: 'Nilai Baru Tersedia',\n          message: 'Nilai ujian Matematika telah diupdate. Silakan cek portal akademik.',\n          type: 'grade',\n          priority: 'medium',\n          actionUrl: '/portal?tab=grades'\n        });\n      }\n    }\n  }\n}\n\n// Auto-initialize when module loads\nif (typeof window !== 'undefined') {\n  NotificationService.initialize();\n}\n\nexport { NotificationService };","import React, { useState, useEffect } from 'react';\nimport { NotificationService, NotificationItem } from '../services/notificationService';\n\ninterface NotificationBellProps {\n  onNotificationClick?: () => void;\n}\n\nconst NotificationBell: React.FC<NotificationBellProps> = ({ onNotificationClick }) => {\n  const [notifications, setNotifications] = useState<NotificationItem[]>([]);\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [unreadCount, setUnreadCount] = useState(0);\n\n  useEffect(() => {\n    // Load initial notifications\n    setNotifications(NotificationService.getNotifications());\n    setUnreadCount(NotificationService.getUnreadCount());\n\n    // Listen for new notifications\n    const handleNewNotification = (event: CustomEvent) => {\n      const notification = event.detail as NotificationItem;\n      setNotifications(prev => [notification, ...prev]);\n      setUnreadCount(prev => prev + 1);\n    };\n\n    window.addEventListener('showNotification', handleNewNotification as EventListener);\n\n    return () => {\n      window.removeEventListener('showNotification', handleNewNotification as EventListener);\n    };\n  }, []);\n\n  const handleNotificationClick = (notification: NotificationItem) => {\n    if (!notification.isRead) {\n      NotificationService.markAsRead(notification.id);\n      setNotifications(prev =>\n        prev.map(n => n.id === notification.id ? { ...n, isRead: true } : n)\n      );\n      setUnreadCount(prev => Math.max(0, prev - 1));\n    }\n\n    if (notification.actionUrl) {\n      window.location.href = notification.actionUrl;\n    }\n\n    setShowDropdown(false);\n  };\n\n  const handleMarkAllAsRead = () => {\n    NotificationService.markAllAsRead();\n    setNotifications(prev => prev.map(n => ({ ...n, isRead: true })));\n    setUnreadCount(0);\n  };\n\n  const handleClearAll = () => {\n    NotificationService.clearAllNotifications();\n    setNotifications([]);\n    setUnreadCount(0);\n  };\n\n  const formatTimeAgo = (timestamp: string) => {\n    const now = new Date();\n    const notificationTime = new Date(timestamp);\n    const diffInMinutes = Math.floor((now.getTime() - notificationTime.getTime()) / (1000 * 60));\n\n    if (diffInMinutes < 1) return 'Baru saja';\n    if (diffInMinutes < 60) return `${diffInMinutes} menit lalu`;\n\n    const diffInHours = Math.floor(diffInMinutes / 60);\n    if (diffInHours < 24) return `${diffInHours} jam lalu`;\n\n    const diffInDays = Math.floor(diffInHours / 24);\n    return `${diffInDays} hari lalu`;\n  };\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'academic': return 'ðŸ“š';\n      case 'schedule': return 'ðŸ“…';\n      case 'grade': return 'ðŸ“Š';\n      case 'announcement': return 'ðŸ“¢';\n      case 'reminder': return 'â°';\n      case 'system': return 'âš™ï¸';\n      default: return 'ðŸ””';\n    }\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'urgent': return 'border-l-red-500';\n      case 'high': return 'border-l-orange-500';\n      case 'medium': return 'border-l-blue-500';\n      case 'low': return 'border-l-gray-500';\n      default: return 'border-l-gray-300';\n    }\n  };\n\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={() => setShowDropdown(!showDropdown)}\n        className=\"relative p-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors\"\n      >\n        <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 17h5l-5 5-5-5h5V12h-5l5-5 5 5h-5v5zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z\" />\n        </svg>\n        <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">\n          {unreadCount}\n        </span>\n      </button>\n\n      {showDropdown && (\n        <div className=\"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700\">\n            <h3 className=\"font-semibold text-gray-900 dark:text-white\">Notifikasi</h3>\n            <div className=\"flex space-x-2\">\n              {unreadCount > 0 && (\n                <button\n                  onClick={handleMarkAllAsRead}\n                  className=\"text-xs text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                >\n                  Tandai semua dibaca\n                </button>\n              )}\n              {notifications.length > 0 && (\n                <button\n                  onClick={handleClearAll}\n                  className=\"text-xs text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300\"\n                >\n                  Hapus semua\n                </button>\n              )}\n            </div>\n          </div>\n\n          {/* Notifications List */}\n          <div className=\"max-h-96 overflow-y-auto\">\n            {notifications.length === 0 ? (\n              <div className=\"p-4 text-center text-gray-500 dark:text-gray-400\">\n                <p>Tidak ada notifikasi</p>\n              </div>\n            ) : (\n              notifications.map((notification) => (\n                <div\n                  key={notification.id}\n                  onClick={() => handleNotificationClick(notification)}\n                  className={`p-4 border-b border-gray-100 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-l-4 ${getPriorityColor(notification.priority)} ${\n                    !notification.isRead ? 'bg-blue-50 dark:bg-blue-900/20' : ''\n                  }`}\n                >\n                  <div className=\"flex items-start space-x-3\">\n                    <span className=\"text-lg\">{getNotificationIcon(notification.type)}</span>\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-start justify-between\">\n                        <p className={`text-sm font-medium truncate ${\n                          !notification.isRead\n                            ? 'text-gray-900 dark:text-white'\n                            : 'text-gray-700 dark:text-gray-300'\n                        }`}>\n                          {notification.title}\n                        </p>\n                        {!notification.isRead && (\n                          <span className=\"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-1\"></span>\n                        )}\n                      </div>\n                      <p className={`text-sm mt-1 ${\n                        !notification.isRead\n                          ? 'text-gray-700 dark:text-gray-300'\n                          : 'text-gray-500 dark:text-gray-400'\n                      }`}>\n                        {notification.message}\n                      </p>\n                      <p className=\"text-xs text-gray-400 dark:text-gray-500 mt-2\">\n                        {formatTimeAgo(notification.timestamp)}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n\n          {/* Footer */}\n          {notifications.length > 0 && (\n            <div className=\"p-3 border-t border-gray-200 dark:border-gray-700\">\n              <button\n                onClick={() => setShowDropdown(false)}\n                className=\"w-full text-center text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n              >\n                Lihat semua notifikasi\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Overlay to close dropdown */}\n      {showDropdown && (\n        <div\n          className=\"fixed inset-0 z-40\"\n          onClick={() => setShowDropdown(false)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default NotificationBell;"],"names":["NotificationService","notifications","notification","newNotification","granted","notificationId","index","n","filtered","prefs","preferences","newPrefs","now","currentTime","startTime","endTime","event","options","browserNotification","scheduleItem","minutesBefore","classTime","reminderTime","delay","timeString","hours","minutes","date","schedule","lastCheck","NotificationBell","onNotificationClick","setNotifications","useState","showDropdown","setShowDropdown","unreadCount","setUnreadCount","useEffect","handleNewNotification","prev","handleNotificationClick","handleMarkAllAsRead","handleClearAll","formatTimeAgo","timestamp","notificationTime","diffInMinutes","diffInHours","getNotificationIcon","type","getPriorityColor","priority","jsxDEV","this"],"mappings":"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"}