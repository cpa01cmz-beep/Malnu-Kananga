# Environment Configuration Template
# Copy this file to .env and fill in your actual values
# NEVER commit actual .env file to version control

# =============================================================================
# FRONTEND CONFIGURATION (Browser - Vite - Cloudflare Pages)
# =============================================================================

# Google Gemini AI Configuration
# Required for AI chat functionality (runs in browser)
# Get this from: https://ai.google.dev
# VITE_ prefix is REQUIRED for Vite to expose these variables to browser
# For Pages deployment, set via: wrangler pages secret put VITE_GEMINI_API_KEY --project-name=malnu-kananga
VITE_GEMINI_API_KEY=your_actual_gemini_api_key_here

# Application Configuration
# NODE_ENV is automatically set by Vite/build process (development/production)
NODE_ENV=development
# VITE_APP_ENV is reserved for future use (not currently used in codebase)
VITE_APP_ENV=development

# Logging Configuration (DEBUG, INFO, WARN, ERROR)
# Set to DEBUG for development, WARN or ERROR for production
VITE_LOG_LEVEL=WARN

# Development Configuration
# VITE_DEV_MODE is reserved for future use (not currently used in codebase)
VITE_DEV_MODE=true
# VITE_ENABLE_PWA is used in deployment documentation (not currently checked in code)
VITE_ENABLE_PWA=true
VITE_ENABLE_AI_CHAT=true

# API Configuration
# Replace with your deployed worker URL
# Current deployment: https://malnu-kananga-worker.cpa01cmz.workers.dev
# For Pages deployment, set via: wrangler pages secret put VITE_API_BASE_URL --project-name=malnu-kananga
VITE_API_BASE_URL=https://malnu-kananga-worker.cpa01cmz.workers.dev

# WebSocket Configuration
# Base URL for WebSocket connections (defaults to API_BASE_URL with wss:// protocol)
VITE_WS_BASE_URL=
# Enable/disable WebSocket connections (set to 'false' to disable)
VITE_WS_ENABLED=true

# =============================================================================
# BACKEND CONFIGURATION (Cloudflare Worker)
# =============================================================================

# JWT Secrets (generate with: openssl rand -base64 32)
# Frontend doesn't use these directly, but Worker requires them
# Configure these in wrangler.toml for production deployments
# Set via: wrangler secret put JWT_SECRET --env production
JWT_SECRET=your_32_character_production_jwt_secret_here
JWT_SECRET_DEV=your_dev_jwt_secret_here

# D1 Database Configuration
# Get these IDs from: wrangler d1 list
# Current development database: malnu-kananga-db-dev (ID: 69605f72-4b69-4dd6-a72c-a17006f61254)
D1_DATABASE_ID=69605f72-4b69-4dd6-a72c-a17006f61254
D1_DATABASE_ID_DEV=69605f72-4b69-4dd6-a72c-a17006f61254

# Google Gemini API Key for Worker
# Worker uses GEMINI_API_KEY (without VITE_ prefix)
# Frontend and Worker use DIFFERENT environment variables intentionally
# Set via: wrangler secret put GEMINI_API_KEY --env production
GEMINI_API_KEY=your_actual_gemini_api_key_here

# =============================================================================
# EMAIL SERVICE CONFIGURATION (Cloudflare Worker)
# =============================================================================

# Email Provider Selection
# Choose from: 'sendgrid', 'mailgun', 'cloudflare-email'
# Set via: wrangler secret put EMAIL_PROVIDER --env production
# Set via: wrangler secret put EMAIL_PROVIDER --env dev
#
# NOTE: EMAIL_PROVIDER must be set as Cloudflare Worker secret, NOT in .env file
# Default fallback: 'cloudflare-email'
EMAIL_PROVIDER=cloudflare-email

# Email Provider API URLs (Reference Only - Configured in wrangler.toml)
# These URLs are configured in wrangler.toml under [vars] and [env.*.vars]
# They are listed here for reference only - do not modify in .env
#
# SendGrid API URL (set in wrangler.toml: SENDGRID_API_URL)
SENDGRID_API_URL=https://api.sendgrid.com/v3/mail/send
# Mailgun API URL (set in wrangler.toml: MAILGUN_API_URL)
MAILGUN_API_URL=https://api.mailgun.net/v3
# Cloudflare Email API URL (set in wrangler.toml: CLOUDFLARE_EMAIL_API_URL)
CLOUDFLARE_EMAIL_API_URL=https://api.cloudflare.com/client/v4/email/send

# Email Provider Secrets (Set via Wrangler)
# =============================================================================
# IMPORTANT: These secrets must be set via wrangler secret command
# Do NOT set these in .env file or wrangler.toml for production
#
# SendGrid Configuration:
#   wrangler secret put SENDGRID_API_KEY --env production
#   wrangler secret put SENDGRID_API_KEY --env dev
# Get your API key from: https://dashboard.sendgrid.com/settings/api_keys
#
# Mailgun Configuration:
#   wrangler secret put MAILGUN_API_KEY --env production
#   wrangler secret put MAILGUN_DOMAIN --env production
#   wrangler secret put MAILGUN_API_KEY --env dev
#   wrangler secret put MAILGUN_DOMAIN --env dev
# Get your API key from: https://app.mailgun.com/settings/api_security
#
# Cloudflare Email Configuration:
#   wrangler secret put CLOUDFLARE_EMAIL_API_KEY --env production
#   wrangler secret put CLOUDFLARE_EMAIL_API_KEY --env dev
# Get your API key from: https://dash.cloudflare.com/profile/api-tokens
# Note: Cloudflare Email is only available to Cloudflare Enterprise customers

# Common Email Configuration (Optional Secrets)
# =============================================================================
# FROM_EMAIL: Default sender email address (optional, defaults to noreply@ma-malnukananga.sch.id)
# Set via: wrangler secret put FROM_EMAIL --env production
# Set via: wrangler secret put FROM_EMAIL --env dev
#
# FROM_NAME: Default sender name (optional, defaults to 'MA Malnu Kananga')
# Set via: wrangler secret put FROM_NAME --env production
# Set via: wrangler secret put FROM_NAME --env dev

# Email Service Implementation Notes:
# =============================================================================
# 1. Password reset emails use unified provider routing (same as handleSendEmail)
# 2. All three email providers are supported: sendgrid, mailgun, cloudflare-email
# 3. Provider is selected via EMAIL_PROVIDER secret at runtime
# 4. Each provider uses its own API key/secret configuration
# 5. Default fallback: 'cloudflare-email' if EMAIL_PROVIDER not set
# 6. See docs/EMAIL_SERVICE.md for detailed configuration and testing guide

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Cloudflare Pages Project Name
# Current project: malnu-kananga
# Pages URL: https://malnu-kananga.pages.dev
PAGES_PROJECT_NAME=malnu-kananga

# Cloudflare Worker Project Name
# Current worker: malnu-kananga-worker
# Worker URL: https://malnu-kananga-worker.cpa01cmz.workers.dev
WORKER_NAME=malnu-kananga-worker

# Security Notes:
# 1. Never share your actual API keys
# 2. Use different keys for development and production
# 3. Rotate keys regularly
# 4. Use environment-specific .env files when needed
# 5. Never commit .env files to version control
# 6. For Pages deployment, use wrangler pages secret to set environment variables
# 7. For Worker deployment, use wrangler secret to set secrets

# =============================================================================
# PAYMENT GATEWAY CONFIGURATION (Midtrans - Recommended for Indonesia)
# =============================================================================

# Midtrans Payment Gateway URL (Client-side - for redirect)
# Get this from your Midtrans dashboard (Snap Application)
# This is safe to expose as it's just the URL for payment page redirect
VITE_PAYMENT_GATEWAY_URL=https://app.midtrans.com/snap/v1
# Set via: wrangler pages secret put VITE_PAYMENT_GATEWAY_URL --project-name=malnu-kananga

# SECURITY CRITICAL: Payment Gateway Server Key
# Midtrans Server Key MUST be stored as Cloudflare Worker secret, NOT in .env file
# NEVER expose server key to client-side code (browser bundle)
#
# Set server key as Cloudflare Worker secret:
#   wrangler secret put PAYMENT_SERVER_KEY --env production
#   wrangler secret put PAYMENT_SERVER_KEY --env dev
#
# Get your Midtrans Server Key from: https://dashboard.midtrans.com/settings/api-info
# The worker.js payment endpoints will use this secret to authenticate with Midtrans API
# All payment operations (create, status, cancel, webhook) go through backend, NOT client
#
# ⚠️ SECURITY: Do NOT set VITE_PAYMENT_API_KEY in client code
# The paymentService.ts file with client-side API calls has been REMOVED
# All payment operations now go through Cloudflare Worker backend for security
