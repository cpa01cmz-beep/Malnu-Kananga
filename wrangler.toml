name = "malnu-api"
main = "worker.js"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Environment variables untuk production
[env.production.vars]
# API_KEY akan di-set melalui Cloudflare dashboard atau CLI

# Bindings untuk Cloudflare services
[env.production]
# AI binding untuk Cloudflare AI models
[[env.production.ai]]
# Vectorize index untuk RAG functionality
[[env.production.vectorize]]
index_name = "malnu-kananga-docs"
# KV Storage untuk authentication (gratis di free plan)
[[env.production.kv_namespaces]]
binding = "KV"
id = "your_kv_namespace_id_here"
preview_id = "your_kv_preview_namespace_id_here"

# Development environment
[env.preview.vars]
# API_KEY untuk development

[env.preview]
[[env.preview.ai]]
[[env.preview.vectorize]]
index_name = "malnu-kananga-docs-preview"
[[env.preview.kv_namespaces]]
binding = "KV"
id = "your_kv_namespace_id_here"
preview_id = "your_kv_preview_namespace_id_here"

# Build configuration
[build]
command = "npm run build"

# Deployment configuration
[build.upload]
format = "service-worker"