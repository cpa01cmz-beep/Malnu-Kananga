name = "malnu-kananga-worker"
main = "worker.js"
compatibility_date = "2024-01-01"

# Production deployment - worker deployed to:
# https://malnu-kananga-worker.cpa01cmz.workers.dev

# Environment bindings for production
[env.production]
name = "malnu-kananga-worker-prod"

# D1 Database bindings - create with: wrangler d1 create malnu-kananga-db
[[env.production.d1_databases]]
binding = "DB"
database_name = "malnu-kananga-db-prod"
database_id = "placeholder-database-id"  # Replace with actual ID after creation

# Vectorize index bindings - create with: wrangler vectorize create malnu-kananga-index --dimensions=768 --metric=cosine
[[env.production.vectorize]]
binding = "VECTORIZE_INDEX"
index_name = "malnu-kananga-index"

# R2 Bucket bindings - create with: wrangler r2 bucket create malnu-kananga-files
[[env.production.r2_buckets]]
binding = "BUCKET"
bucket_name = "malnu-kananga-files"

# Environment variables
[env.production.vars]
ALLOWED_ORIGIN = "https://ma-malnukananga.sch.id"
JWT_SECRET = "your-super-secret-jwt-key-change-this-in-production"
GEMINI_API_KEY = "your_production_gemini_api_key_here"
NODE_ENV = "production"
LOG_LEVEL = "error"

# Local development
[env.dev]
name = "malnu-kananga-worker-dev"

[[env.dev.d1_databases]]
binding = "DB"
database_name = "malnu-kananga-db-dev"
database_id = "your-dev-d1-database-id-here"  # Replace with actual ID after creation

[[env.dev.vectorize]]
binding = "VECTORIZE_INDEX"
index_name = "malnu-kananga-index-dev"

[[env.dev.r2_buckets]]
binding = "BUCKET"
bucket_name = "malnu-kananga-files-dev"

[env.dev.vars]
ALLOWED_ORIGIN = "*"
JWT_SECRET = "dev-jwt-secret-change-for-production"